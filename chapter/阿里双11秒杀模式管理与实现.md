# 动脑学院 - 阿里双11秒杀模式管理与实现
秒杀只是一个特殊的购物流程。特点：

1. 高并发，不能超卖

如：浏览 -> 下单 -> 支付 -> 发货

## 浏览
浏览量大：可增加缓存解决

## 下单

### 下单流程
1. 修改库存
2. 创建订单
3. 支付状态
  ：一般有时间限制，会弄一个定时任务，去检查关闭未付款订单
** 修改库存 **
- 利用数据库的乐观锁 - 并发量不能太高。
```
int i = update xxx set 库存 = 库存-购买量
where id = xxx and 库存 - 购买量 >= 0
判断i是否更新成功。
```


## 支付

## 发货

# 秒杀模式
1. 向上面那种，阿里的模式
2. 浏览 -> 下单 -> 支付 -> 发货：
   但是修改库存是在支付成功之后。（我自己感觉很不合理）

继续视频 36 分钟。
